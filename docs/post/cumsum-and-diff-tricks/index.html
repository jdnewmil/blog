<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Jeff Newmiller">

  
  
  
    
  
  <meta name="description" content="The idea Intervals One day (max) separation Wind Direction Fini   There are many instances where you want to look for “trigger” events in a table (data frame) that mark the beginning of a sequence of records that need to be grouped together.">

  
  <link rel="alternate" hreflang="en-us" href="/blog/post/cumsum-and-diff-tricks/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/blog/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/blog/index.webmanifest">
  <link rel="icon" type="image/png" href="/blog/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/blog/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/blog/post/cumsum-and-diff-tricks/">

  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Musings">
  <meta property="og:url" content="/blog/post/cumsum-and-diff-tricks/">
  <meta property="og:title" content="Cumsum and Diff Tricks | Musings">
  <meta property="og:description" content="The idea Intervals One day (max) separation Wind Direction Fini   There are many instances where you want to look for “trigger” events in a table (data frame) that mark the beginning of a sequence of records that need to be grouped together."><meta property="og:image" content="/blog/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png">
  <meta property="twitter:image" content="/blog/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-05-24T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-05-24T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/blog/post/cumsum-and-diff-tricks/"
  },
  "headline": "Cumsum and Diff Tricks",
  
  "datePublished": "2020-05-24T00:00:00Z",
  "dateModified": "2020-05-24T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Jeff Newmiller"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Musings",
    "logo": {
      "@type": "ImageObject",
      "url": "/blog/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "The idea Intervals One day (max) separation Wind Direction Fini   There are many instances where you want to look for “trigger” events in a table (data frame) that mark the beginning of a sequence of records that need to be grouped together."
}
</script>

  

  


  


  





  <title>Cumsum and Diff Tricks | Musings</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/blog/">Musings</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/blog/">Musings</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/blog/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/blog/#contact"><span>Contact</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  <article class="article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1>Cumsum and Diff Tricks</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    May 24, 2020
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    18 min read
  </span>
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/blog/category/r/">R</a></span>
  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style">
      
<script src="/blog/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/blog/rmarkdown-libs/bsTable/bootstrapTable.min.css" rel="stylesheet" />

<div id="TOC">
<ul>
<li><a href="#the-idea">The idea</a></li>
<li><a href="#intervals">Intervals</a></li>
<li><a href="#one-day-max-separation">One day (max) separation</a></li>
<li><a href="#wind-direction">Wind Direction</a></li>
<li><a href="#fini">Fini</a></li>
</ul>
</div>

<p>There are many instances where you want to look for “trigger” events in a table (data frame) that mark the beginning of a sequence of records that need to be grouped together. While in some cases the end of such a sequence may be defined by the next similar event, in some cases there may be different “trigger” event values that mark the end of such a group of records.</p>
<p>For example, we might have records of wind direction and be interested in identifying periods when the direction was generally toward the west. The beginning of such a period would be a record for which the direction is “west”, but the direction in the previous record was something other than “west”. Such a period of westerly wind direction would logically end when the direction again became something other than “west”.</p>
<p>The obvious solution for automating the identification of such groups of records is to write a <code>while</code> or <code>for</code> loop that sequentially examines each record and uses <code>if-else</code> logic to generate a new column in the table that indicates the assignment of each record to an appropriate group. However, in many (but not all) cases such logic can instead be implemented using fast-running vectorized functions by creating a sequence of a few column-wise vectors that lead to generation of such a grouping column using simpler and faster basic operations.</p>
<p>(Note that these techniques can be applied in Python as well, using numpy/pandas functions, but examples in Python are not included in this post.)</p>
<pre class="r"><code>suppressPackageStartupMessages({
  library(dplyr)
  library(ggplot2)
  library(kableExtra)
})
theme_set(theme_minimal())</code></pre>
<div id="the-idea" class="section level1">
<h1>The idea</h1>
<p>If we have a timeline, or any real number line, we may be able to figure out when certain things happened, but it may be useful to lump records following those events together.</p>
<pre class="r"><code>dta1 &lt;- read.table( text=
&quot;X  Start
 1  1
 2  0
 3  1
 4  0
 5  0
 6  0
 7  1
 8  0
&quot;,header=TRUE,as.is=TRUE)</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
X
</th>
<th style="text-align:right;">
Start
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p>Here we have some events at <code>X</code> “times” of 1, 3, and 7.</p>
<p><img src="/blog/post/2020-05-24-cumsum-and-diff-tricks_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>But we would like to group the records together:</p>
<table>
<thead>
<tr>
<th style="text-align:right;">
X
</th>
<th style="text-align:right;">
Start
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(68, 1, 84, 0.4) !important;">
1
</td>
<td style="text-align:right;background-color: rgba(68, 1, 84, 0.4) !important;width: 0.5in; ">
1
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(68, 1, 84, 0.4) !important;">
2
</td>
<td style="text-align:right;background-color: rgba(68, 1, 84, 0.4) !important;width: 0.5in; ">
0
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;">
3
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.5in; ">
1
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;">
4
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.5in; ">
0
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;">
5
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.5in; ">
0
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;">
6
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.5in; ">
0
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(253, 231, 37, 0.4) !important;">
7
</td>
<td style="text-align:right;background-color: rgba(253, 231, 37, 0.4) !important;width: 0.5in; ">
1
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(253, 231, 37, 0.4) !important;">
8
</td>
<td style="text-align:right;background-color: rgba(253, 231, 37, 0.4) !important;width: 0.5in; ">
0
</td>
</tr>
</tbody>
</table>
<p>The trick to marking these records as belonging together is to use <code>cumsum</code> on the <code>Start</code> events</p>
<pre class="r"><code>dta1$G &lt;- cumsum( dta1$Start )</code></pre>
<p><img src="/blog/post/2020-05-24-cumsum-and-diff-tricks_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<table>
<thead>
<tr>
<th style="text-align:right;">
X
</th>
<th style="text-align:right;">
Start
</th>
<th style="text-align:right;">
G
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;background-color: rgba(68, 1, 84, 0.4) !important;">
1
</td>
<td style="text-align:right;background-color: rgba(68, 1, 84, 0.4) !important;width: 0.5in; ">
1
</td>
<td style="text-align:right;background-color: rgba(68, 1, 84, 0.4) !important;width: 0.25in; ">
1
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(68, 1, 84, 0.4) !important;">
2
</td>
<td style="text-align:right;background-color: rgba(68, 1, 84, 0.4) !important;width: 0.5in; ">
0
</td>
<td style="text-align:right;background-color: rgba(68, 1, 84, 0.4) !important;width: 0.25in; ">
1
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;">
3
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.5in; ">
1
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.25in; ">
2
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;">
4
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.5in; ">
0
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.25in; ">
2
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;">
5
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.5in; ">
0
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.25in; ">
2
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;">
6
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.5in; ">
0
</td>
<td style="text-align:right;background-color: rgba(33, 144, 140, 0.4) !important;width: 0.25in; ">
2
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(253, 231, 37, 0.4) !important;">
7
</td>
<td style="text-align:right;background-color: rgba(253, 231, 37, 0.4) !important;width: 0.5in; ">
1
</td>
<td style="text-align:right;background-color: rgba(253, 231, 37, 0.4) !important;width: 0.25in; ">
3
</td>
</tr>
<tr>
<td style="text-align:right;background-color: rgba(253, 231, 37, 0.4) !important;">
8
</td>
<td style="text-align:right;background-color: rgba(253, 231, 37, 0.4) !important;width: 0.5in; ">
0
</td>
<td style="text-align:right;background-color: rgba(253, 231, 37, 0.4) !important;width: 0.25in; ">
3
</td>
</tr>
</tbody>
</table>
<p>The <code>G</code> column can be used in grouped calculations to identify each group of records.</p>
<p>Note that <code>diff</code> and <code>cumsum</code> are useful in this way when the data records are in increasing “time” order. It may be necessary to sort your data before applying these tools to it.</p>
</div>
<div id="intervals" class="section level1">
<h1>Intervals</h1>
<p>Now we look at a more involved extension of this idea: collapsing records that redundantly specify overlapping intervals.</p>
<pre class="r"><code>dta2 &lt;- read.table( text=
&quot;Label Start End
A      5     8
B      2     6
C      9     11
D      14    17
&quot;,header=TRUE)</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Label
</th>
<th style="text-align:right;">
Start
</th>
<th style="text-align:right;">
End
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
17
</td>
</tr>
</tbody>
</table>
<p>As we see below, there are parts of the number line that are not identified by these <code>Start</code>/<code>End</code> pairs (red bars), and there are individual intervals shown by the black bars. Intervals <code>A</code> and <code>B</code> overlap, so the goal is to represent them by one black bar.</p>
<p><img src="/blog/post/2020-05-24-cumsum-and-diff-tricks_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>We start by sorting by beginning of interval (<code>Start</code>).</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Label
</th>
<th style="text-align:right;">
Start
</th>
<th style="text-align:right;">
End
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
17
</td>
</tr>
</tbody>
</table>
<p><img src="/blog/post/2020-05-24-cumsum-and-diff-tricks_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Next we notice that we can subtract the red <code>End</code> values from the yellow <code>Start</code> values to figure out how big the “hole” is preceding each <code>Start</code> value. Notice that the hole before the first interval is infinitely large.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Label
</th>
<th style="text-align:left;">
Start
</th>
<th style="text-align:left;">
End
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;width: 0.5in; ">
B
</td>
<td style="text-align:left;width: 0.5in; ">
<span style="     border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white !important;">2</span>
</td>
<td style="text-align:left;width: 0.5in; ">
<span style="     border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red !important;">6</span>
</td>
</tr>
<tr>
<td style="text-align:left;width: 0.5in; ">
A
</td>
<td style="text-align:left;width: 0.5in; ">
<span style="     border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: yellow !important;">5</span>
</td>
<td style="text-align:left;width: 0.5in; ">
<span style="     border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red !important;">8</span>
</td>
</tr>
<tr>
<td style="text-align:left;width: 0.5in; ">
C
</td>
<td style="text-align:left;width: 0.5in; ">
<span style="     border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: yellow !important;">9</span>
</td>
<td style="text-align:left;width: 0.5in; ">
<span style="     border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: red !important;">11</span>
</td>
</tr>
<tr>
<td style="text-align:left;width: 0.5in; ">
D
</td>
<td style="text-align:left;width: 0.5in; ">
<span style="     border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: yellow !important;">14</span>
</td>
<td style="text-align:left;width: 0.5in; ">
<span style="     border-radius: 4px; padding-right: 4px; padding-left: 4px; background-color: white !important;">17</span>
</td>
</tr>
</tbody>
</table>
<pre class="r"><code>dta2c &lt;- (   dta2b
         %&gt;% mutate( hole = c( Inf, Start[-1]-End[-n()] ) )
         )</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Label
</th>
<th style="text-align:right;">
Start
</th>
<th style="text-align:right;">
End
</th>
<th style="text-align:right;">
hole
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
Inf
</td>
</tr>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-1
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<p>Next we identify events… which intervals have holes greater or equal to zero in front of them?</p>
<pre class="r"><code>dta2d &lt;- (   dta2c
         %&gt;% mutate( group_start = ( 0 &lt;= hole ) )
         )</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Label
</th>
<th style="text-align:right;">
Start
</th>
<th style="text-align:right;">
End
</th>
<th style="text-align:right;">
hole
</th>
<th style="text-align:left;">
group_start
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:left;">
FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
</tbody>
</table>
<p>Now that we have events identified, we can use <code>cumsum</code> to identify records that belong together:</p>
<pre class="r"><code>dta2e &lt;- (   dta2d
         %&gt;% mutate( group = cumsum( group_start ) )
         )</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Label
</th>
<th style="text-align:right;">
Start
</th>
<th style="text-align:right;">
End
</th>
<th style="text-align:right;">
hole
</th>
<th style="text-align:left;">
group_start
</th>
<th style="text-align:right;">
group
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
B
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
A
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
-1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
C
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
D
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
3
</td>
</tr>
</tbody>
</table>
<p>With the <code>group</code> column defined, the minimum <code>Start</code> and the maximum <code>End</code> in each <code>group</code> value can be used to form a single interval record.</p>
<pre class="r"><code>dta2f &lt;- (   dta2e
         %&gt;% group_by( group )
         %&gt;% summarise( Start = min( Start )
                      , End = max( End )
                      )
         %&gt;% ungroup()
         )</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
group
</th>
<th style="text-align:right;">
Start
</th>
<th style="text-align:right;">
End
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
17
</td>
</tr>
</tbody>
</table>
<p><img src="/blog/post/2020-05-24-cumsum-and-diff-tricks_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>With <code>dplyr</code> this series of operations can be piped together instead of built incrementally as we did above to show the intermediate results:</p>
<pre class="r"><code>dta2g &lt;- (   dta2
         %&gt;% arrange( Start )
         %&gt;% mutate( hole = c( Inf, Start[-1]-End[-n()] )
                   , group = cumsum( 0 &lt;= hole )
                   )
         %&gt;% group_by( group )
         %&gt;% summarise( Start = min( Start )
                      , End = max( End )
                      )
         %&gt;% ungroup()
         )</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
group
</th>
<th style="text-align:right;">
Start
</th>
<th style="text-align:right;">
End
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
11
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
17
</td>
</tr>
</tbody>
</table>
</div>
<div id="one-day-max-separation" class="section level1">
<h1>One day (max) separation</h1>
<p>Suppose you have intervals that are always defined using dates within one year, so technically December 31 does not actually overlap with January 1 of the following year. Depending on the nature of the data this may in fact be close enough, so you may want to define “overlap” as “within one day”. Consider a sample data set:</p>
<pre class="r"><code>library(dplyr)

dta3 &lt;- read.csv(text=
&quot;id|start|end
1|2015-08-01|2015-12-31
1|2016-01-01|2016-12-31
1|2017-01-01|2017-05-08
2|2014-08-12|2014-12-31
2|2015-01-01|2015-07-23
2|2016-01-12|2016-12-31
2|2017-01-01|2017-08-22
&quot;,sep=&quot;|&quot;,as.is=TRUE
,colClasses=c(&quot;numeric&quot;,&quot;Date&quot;,&quot;Date&quot;))</code></pre>
<p>We can again compute hole size, and compare the hole size with 1 day instead of 0 days:</p>
<pre class="r"><code>dta3a &lt;- (   dta3
         %&gt;% arrange( id, start )
         %&gt;% group_by( id )
         %&gt;% mutate( hole = c( Inf
                             , as.numeric( start[-1]-end[-n()]
                                         , units=&quot;days&quot;
                                         )
                             )
                   , gp = cumsum( 1 &lt; hole )
                   )
         %&gt;% ungroup()
         )</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:left;">
start
</th>
<th style="text-align:left;">
end
</th>
<th style="text-align:right;">
hole
</th>
<th style="text-align:right;">
gp
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2015-08-01
</td>
<td style="text-align:left;">
2015-12-31
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2016-01-01
</td>
<td style="text-align:left;">
2016-12-31
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-05-08
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2014-08-12
</td>
<td style="text-align:left;">
2014-12-31
</td>
<td style="text-align:right;">
Inf
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2015-01-01
</td>
<td style="text-align:left;">
2015-07-23
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2016-01-12
</td>
<td style="text-align:left;">
2016-12-31
</td>
<td style="text-align:right;">
173
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2017-01-01
</td>
<td style="text-align:left;">
2017-08-22
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
<p>Take this same sequence of calculations, and performing the group-by we can identify the starting date and the ending date for each group.</p>
<pre class="r"><code>dta3b &lt;- (   dta3
         %&gt;% arrange( id, start )
         %&gt;% group_by( id )
         %&gt;% mutate( hole = c( Inf
                             , as.numeric( start[-1]-end[-n()]
                                         , units=&quot;days&quot;
                                         )
                             )
                   , gp = cumsum( 1 &lt; hole )
                   )
         %&gt;% ungroup()
         %&gt;% group_by( id, gp )
         %&gt;% summarise( start = min( start )
                      , end = max( end )
                      )
         )</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:right;">
gp
</th>
<th style="text-align:left;">
start
</th>
<th style="text-align:left;">
end
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2015-08-01
</td>
<td style="text-align:left;">
2017-05-08
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2014-08-12
</td>
<td style="text-align:left;">
2015-07-23
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
2016-01-12
</td>
<td style="text-align:left;">
2017-08-22
</td>
</tr>
</tbody>
</table>
</div>
<div id="wind-direction" class="section level1">
<h1>Wind Direction</h1>
<p>In a <a href="https://stat.ethz.ch/pipermail/r-help/2020-May/467004.html">question</a> on the R-help mailing list, the following problem is posed:</p>
<blockquote>
<p>[…] the wind direction is very
stable during these situations, and therefore I would like to start
from it. […]</p>
<p>In the case of the example below reported, I know that the directions
of this particular automatic station must be only SW or WSW.</p>
<p>My biggest problem, […] is to find the beginning and the end of
each event, when there is a change in the main direction.
Thinking about categorical data in general, is there a way to detect
periods when one particular category is more frequent?</p>
</blockquote>
<p>So the sample data provided is one day of wind data, with the intent to handle many days of data efficiently:</p>
<pre class="r"><code>first_day_POSIX &lt;- as.POSIXct( &quot;2020-02-19&quot; )
last_day_POSIX &lt;- as.POSIXct( &quot;2020-02-20&quot; )
mydf &lt;- data.frame(
    data_POSIX = seq( first_day_POSIX, last_day_POSIX, by=&quot;10 min&quot; )
  , main_dir = c( &quot;WSW&quot;, &quot;WSW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;W&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;W&quot;
                , &quot;W&quot;, &quot;SW&quot;, &quot;WSW&quot;, &quot;SSW&quot;, &quot;S&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;WSW&quot;, &quot;WNW&quot;
                , &quot;W&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;SE&quot;, &quot;SE&quot;, &quot;SE&quot;, &quot;NW&quot;, &quot;NNE&quot;, &quot;ENE&quot;
                , &quot;SE&quot;, &quot;NNW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NE&quot;
                , &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;N&quot;, &quot;WNW&quot;, &quot;NW&quot;, &quot;NNW&quot;
                , &quot;NNW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;WNW&quot;, &quot;ESE&quot;, &quot;W&quot;, &quot;WSW&quot;, &quot;SW&quot;
                , &quot;SW&quot;, &quot;SW&quot;, &quot;WSW&quot;, &quot;SW&quot;, &quot;S&quot;, &quot;S&quot;, &quot;SSW&quot;, &quot;SW&quot;, &quot;WSW&quot;
                , &quot;WSW&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;SW&quot;, &quot;WSW&quot;
                , &quot;WSW&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;WSW&quot;
                , &quot;WSW&quot;, &quot;WSW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;SW&quot;
                , &quot;SW&quot;, &quot;SW&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;SW&quot;, &quot;SW&quot;
                , &quot;SW&quot;, &quot;SW&quot;, &quot;WSW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;SW&quot;, &quot;WSW&quot;
                , &quot;SW&quot;, &quot;SW&quot;, &quot;W&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;SSW&quot;, &quot;S&quot;, &quot;WNW&quot;, &quot;SW&quot;
                , &quot;W&quot;, &quot;WSW&quot;, &quot;WSW&quot;, &quot;SE&quot;, &quot;SE&quot;, &quot;SE&quot;, &quot;NW&quot;, &quot;NNE&quot;, &quot;ENE&quot;
                , &quot;SE&quot;, &quot;NNW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NE&quot;
                , &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;N&quot;, &quot;WNW&quot;, &quot;NW&quot;, &quot;NNW&quot;
                , &quot;NNW&quot;, &quot;NW&quot;, &quot;NW&quot;, &quot;NW&quot;
                )
  , max_speed = c( 4.60, 4.60, 3.40, 3.10, 4.80, 4.20, 4.10, 4.50, 4.70
                 , 4.30, 2.40, 2.30, 2.20, 2.10, 2.90, 2.80, 1.80, 2.70
                 , 4.30, 3.30, 2.30, 2.30, 3.20, 3.20, 2.90, 2.30, 1.50
                 , 1.80, 2.90, 2.40, 1.80, 2.40, 2.30, 2.60, 1.80, 2.30
                 , 1.90, 2.20, 2.80, 2.40, 1.00, 1.10, 1.60, 2.30, 2.50
                 , 3.30, 3.40, 3.20, 4.50, 3.90, 3.10, 2.40, 6.00, 7.80
                 , 6.30, 7.80, 8.10, 6.10, 7.40, 9.50, 8.90, 9.10, 10.10
                 , 10.50, 11.10, 10.10, 10.90, 11.30, 13.40, 13.50, 12.80
                 , 11.50, 13.10, 13.50, 11.10, 10.50, 8.50, 10.10, 10.70
                 , 13.60, 11.90, 14.90, 10.90, 10.90, 12.80, 12.10, 9.10
                 , 8.30, 8.80, 7.40, 8.40, 10.30, 10.00, 7.00, 8.50, 8.40
                 , 8.60, 6.70, 7.30, 6.20, 5.90, 5.90, 5.10, 5.80, 5.60
                 , 6.50, 6.60, 11.70, 11.30, 8.70, 7.10, 6.90, 4.30
                 , 3.80, 4.30, 3.30, 2.30, 2.30, 3.20, 3.20, 2.90, 2.30
                 , 1.50, 1.80, 2.90, 2.40, 1.80, 2.40, 2.30, 2.60, 1.80
                 , 2.30, 1.90, 2.20, 2.80, 2.40, 1.00, 1.10, 1.60, 2.30
                 , 2.50, 3.30, 3.40, 3.20, 4.50
                 )
)</code></pre>
<p>We begin with the base-R approach. Afterward this we will show the equivalent <code>dplyr</code> syntax.</p>
<p>First To identify candidate records to be considered as “foehn” conditions, and a first stab at the groups of records of interest:</p>
<pre class="r"><code>mydf$foehn1a &lt;- mydf$main_dir %in% c( &quot;WSW&quot;, &quot;SW&quot; )
mydf$foehn1b &lt;- cumsum( !mydf$foehn1a )</code></pre>
<p>Having the ability to consider the groups separately, we identify sequences of records of more than ten records (one hour, as an example minimum period of time):</p>
<pre class="r"><code>mydf$foehn1c &lt;- ave( rep( 1, nrow( mydf ) )
                   , mydf$foehn1b
                   , FUN=function(v) 10 &lt; length( v )
                   )</code></pre>
<p>(If you are not familiar with the <code>ave</code> function, it calls the given function with subsets from the first argument corresponding to distinct values in the second argument (the grouping variable), and combines the results as a vector just as long as the original input data. The function should return either a scalar (which will be extended as necessary), or a vector the same length as the input vector.)</p>
<p>With the groups of similar-direction records that are long enough, we can re-compute events that only apply to the beginning of long intervals:</p>
<pre class="r"><code>mydf$foehn1d &lt;- 0 &lt; diff( c( 0, mydf$foehn1c ) )</code></pre>
<p>Now we can generate distinct incrementing groups of records, and use the previously determined flag values for the long records to zero out the grouping flags for records that do not apply to the relevant “foehn” period of time:</p>
<pre class="r"><code>mydf$foehn1e &lt;- with( mydf
                    , ifelse( foehn1c
                            , cumsum( foehn1d )
                            , 0
                            )
                    )</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
data_POSIX
</th>
<th style="text-align:left;">
main_dir
</th>
<th style="text-align:right;">
max_speed
</th>
<th style="text-align:left;">
foehn1a
</th>
<th style="text-align:right;">
foehn1b
</th>
<th style="text-align:right;">
foehn1c
</th>
<th style="text-align:left;">
foehn1d
</th>
<th style="text-align:right;">
foehn1e
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2020-02-19 00:00:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 00:10:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 00:20:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 00:30:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 00:40:00
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4.8
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 00:50:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
4.2
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 01:00:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
4.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 01:10:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 01:20:00
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 01:30:00
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 01:40:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 01:50:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 02:00:00
</td>
<td style="text-align:left;">
SSW
</td>
<td style="text-align:right;">
2.2
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 02:10:00
</td>
<td style="text-align:left;">
S
</td>
<td style="text-align:right;">
2.1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 02:20:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 02:30:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 02:40:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 02:50:00
</td>
<td style="text-align:left;">
WNW
</td>
<td style="text-align:right;">
2.7
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 03:00:00
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 03:10:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 03:20:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 03:30:00
</td>
<td style="text-align:left;">
SE
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 03:40:00
</td>
<td style="text-align:left;">
SE
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 03:50:00
</td>
<td style="text-align:left;">
SE
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 04:00:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 04:10:00
</td>
<td style="text-align:left;">
NNE
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 04:20:00
</td>
<td style="text-align:left;">
ENE
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 04:30:00
</td>
<td style="text-align:left;">
SE
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 04:40:00
</td>
<td style="text-align:left;">
NNW
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 04:50:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 05:00:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
17
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 05:10:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 05:20:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
19
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 05:30:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.6
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 05:40:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 05:50:00
</td>
<td style="text-align:left;">
NE
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 06:00:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
1.9
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 06:10:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.2
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 06:20:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 06:30:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 06:40:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
27
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 06:50:00
</td>
<td style="text-align:left;">
N
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 07:00:00
</td>
<td style="text-align:left;">
WNW
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
29
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 07:10:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 07:20:00
</td>
<td style="text-align:left;">
NNW
</td>
<td style="text-align:right;">
2.5
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 07:30:00
</td>
<td style="text-align:left;">
NNW
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
32
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 07:40:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 07:50:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
34
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 08:00:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
35
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 08:10:00
</td>
<td style="text-align:left;">
WNW
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 08:20:00
</td>
<td style="text-align:left;">
ESE
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
37
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 08:30:00
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 08:40:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 08:50:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
7.8
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 09:00:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
6.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 09:10:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
7.8
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 09:20:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
8.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 09:30:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
6.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
38
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 09:40:00
</td>
<td style="text-align:left;">
S
</td>
<td style="text-align:right;">
7.4
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
39
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 09:50:00
</td>
<td style="text-align:left;">
S
</td>
<td style="text-align:right;">
9.5
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 10:00:00
</td>
<td style="text-align:left;">
SSW
</td>
<td style="text-align:right;">
8.9
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 10:10:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 10:20:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
10.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 10:30:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 10:40:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
11.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 10:50:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
10.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 11:00:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
10.9
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 11:10:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
11.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 11:20:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
13.4
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 11:30:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
13.5
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 11:40:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
12.8
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 11:50:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
11.5
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 12:00:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
13.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 12:10:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
13.5
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 12:20:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
11.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 12:30:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 12:40:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
8.5
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 12:50:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
10.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 13:00:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
10.7
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 13:10:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
13.6
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 13:20:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
11.9
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 13:30:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
14.9
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 13:40:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
10.9
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 13:50:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
10.9
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 14:00:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
12.8
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 14:10:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
12.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 14:20:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
9.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 14:30:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
8.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 14:40:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
8.8
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 14:50:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
7.4
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 15:00:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
8.4
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 15:10:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
10.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 15:20:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
10.0
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 15:30:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
7.0
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 15:40:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
8.5
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 15:50:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
8.4
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 16:00:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
8.6
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 16:10:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
6.7
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 16:20:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
7.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 16:30:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
6.2
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 16:40:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
5.9
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 16:50:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
5.9
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 17:00:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
5.1
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 17:10:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
5.8
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 17:20:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
5.6
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 17:30:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
6.5
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 17:40:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
6.6
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
41
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 17:50:00
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
11.7
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 18:00:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
11.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 18:10:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
8.7
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 18:20:00
</td>
<td style="text-align:left;">
SSW
</td>
<td style="text-align:right;">
7.1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
43
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 18:30:00
</td>
<td style="text-align:left;">
S
</td>
<td style="text-align:right;">
6.9
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
44
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 18:40:00
</td>
<td style="text-align:left;">
WNW
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 18:50:00
</td>
<td style="text-align:left;">
SW
</td>
<td style="text-align:right;">
3.8
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 19:00:00
</td>
<td style="text-align:left;">
W
</td>
<td style="text-align:right;">
4.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 19:10:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 19:20:00
</td>
<td style="text-align:left;">
WSW
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
TRUE
</td>
<td style="text-align:right;">
46
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 19:30:00
</td>
<td style="text-align:left;">
SE
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 19:40:00
</td>
<td style="text-align:left;">
SE
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
48
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 19:50:00
</td>
<td style="text-align:left;">
SE
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
49
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 20:00:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 20:10:00
</td>
<td style="text-align:left;">
NNE
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 20:20:00
</td>
<td style="text-align:left;">
ENE
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
52
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 20:30:00
</td>
<td style="text-align:left;">
SE
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
53
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 20:40:00
</td>
<td style="text-align:left;">
NNW
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
54
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 20:50:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
55
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 21:00:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
56
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 21:10:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
57
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 21:20:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 21:30:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.6
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
59
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 21:40:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 21:50:00
</td>
<td style="text-align:left;">
NE
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
61
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 22:00:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
1.9
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 22:10:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.2
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
63
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 22:20:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.8
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 22:30:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.4
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
65
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 22:40:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
66
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 22:50:00
</td>
<td style="text-align:left;">
N
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 23:00:00
</td>
<td style="text-align:left;">
WNW
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
68
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 23:10:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
69
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 23:20:00
</td>
<td style="text-align:left;">
NNW
</td>
<td style="text-align:right;">
2.5
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 23:30:00
</td>
<td style="text-align:left;">
NNW
</td>
<td style="text-align:right;">
3.3
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
71
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 23:40:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-19 23:50:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
73
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-02-20 00:00:00
</td>
<td style="text-align:left;">
NW
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:left;">
FALSE
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
<p>And if all we want is to identify start and end periods:</p>
<pre class="r"><code>mydf1 &lt;- mydf[ 0 != mydf$foehn1e, c( &quot;data_POSIX&quot;, &quot;foehn1e&quot;) ]
mydf2 &lt;- do.call( rbind
                , lapply( split( mydf1
                               , mydf1$foehn1e
                               )
                        , function( DF ) {
                            data.frame( foehn1e = DF$foehn1e[ 1 ]
                                      , Start = min( DF$data_POSIX )
                                      , End = max( DF$data_POSIX )
                                      )
                          }
                        )
                )</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
foehn1e
</th>
<th style="text-align:left;">
Start
</th>
<th style="text-align:left;">
End
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-02-19 10:00:00
</td>
<td style="text-align:left;">
2020-02-19 17:40:00
</td>
</tr>
</tbody>
</table>
<p>Alternatively, the above steps can be encoded using <code>dplyr</code>:</p>
<pre class="r"><code>mydf3alt &lt;- (   mydf
            %&gt;% mutate( foehn1a = main_dir %in% c( &quot;WSW&quot;, &quot;SW&quot; )
                      , foehn1b = cumsum( !foehn1a )
                      )
            %&gt;% group_by( foehn1b )
            %&gt;% mutate( foehn1c = 10 &lt; n() )
            %&gt;% ungroup()
            %&gt;% mutate( foehn1d = 0 &lt; diff( c( 0, foehn1c ) )
                      , foehn1e = ifelse( foehn1c
                                        , cumsum( foehn1d )
                                        , 0
                                        )
                      )
            )</code></pre>
<p>Just to confirm that this method obtains the same result as the base R method:</p>
<pre class="r"><code>all( mydf == mydf3alt )</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>And the collapsed form is:</p>
<pre class="r"><code>mydf3alt2 &lt;- (   mydf3alt
             %&gt;% filter( 0 &lt; foehn1e )
             %&gt;% group_by( foehn1e )
             %&gt;% summarise( Start = min( data_POSIX )
                          , End = max( data_POSIX )
                          )
             )</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
foehn1e
</th>
<th style="text-align:left;">
Start
</th>
<th style="text-align:left;">
End
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
2020-02-19 10:00:00
</td>
<td style="text-align:left;">
2020-02-19 17:40:00
</td>
</tr>
</tbody>
</table>
<p>Just to confirm the same final results:</p>
<pre class="r"><code>all( mydf2 == mydf3alt2 )</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>👍</p>
</div>
<div id="fini" class="section level1">
<h1>Fini</h1>
<p>In summary:</p>
<ul>
<li>The <code>diff</code> function is useful in finding “events” to begin or end groups of record classifications.</li>
<li>Events can also be identified using logical tests of information in records.</li>
<li>The <code>cumsum</code> function is useful in converting events into grouping variables.</li>
<li>These grouping columns can be used to divide up the records into groups and collapse them into summary values such as start or end times, or aggregate measures relevant to those records.</li>
<li>These techniques can efficiently scale up to very large data sets.</li>
<li>There are some forms of event specifications that cannot be identified this way, and in such cases a for loop in R or Rcpp may be needed. In general, when continuous values are accumulated differently according to events, and subsequent events are defined in terms of those continuous accumulations, those simulations are in general not amenable to these <code>cumsum</code> and <code>diff</code> tricks.</li>
</ul>
</div>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/blog/tag/data-analysis/">data analysis</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/blog/post/cumsum-and-diff-tricks/&amp;text=Cumsum%20and%20Diff%20Tricks" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/blog/post/cumsum-and-diff-tricks/&amp;t=Cumsum%20and%20Diff%20Tricks" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Cumsum%20and%20Diff%20Tricks&amp;body=/blog/post/cumsum-and-diff-tricks/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/blog/post/cumsum-and-diff-tricks/&amp;title=Cumsum%20and%20Diff%20Tricks" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Cumsum%20and%20Diff%20Tricks%20/blog/post/cumsum-and-diff-tricks/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/blog/post/cumsum-and-diff-tricks/&amp;title=Cumsum%20and%20Diff%20Tricks" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>












  
  





  
    
    
    
      
    
    
    
    <div class="media author-card content-widget-hr">
      
        
        <img class="avatar mr-3 avatar-circle" src="/blog/author/jeff-newmiller/avatar_hu52a603635ecebd45650b162dadabb4e5_12861_270x270_fill_q90_lanczos_center.jpg" alt="Jeff Newmiller">
      

      <div class="media-body">
        <h5 class="card-title"><a href="/blog/">Jeff Newmiller</a></h5>
        <h6 class="card-subtitle">Principal Engineer</h6>
        <p class="card-text">Solar engineer and data scientist.</p>
        <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/blog/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/jdnewmil" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

      </div>
    </div>
  












  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/blog/post/inaugural-post/">Inaugural Post</a></li>
      
    </ul>
  </div>
  



  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/blog/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/blog/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  
  <p class="powered-by">
    
      <a href="/blog/privacy/">Privacy Policy</a>
    
    
       &middot; 
      <a href="/blog/terms/">Terms</a>
    
  </p>
  

  <p class="powered-by">
    
  </p>

  
  





  
  
  
  

  
  
  
    
      
    
  

  

  
  <p class="powered-by copyright-license-text">
    This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">CC BY NC ND 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">
      <img src="https://search.creativecommons.org/static/img/cc_icon.svg" alt="CC icon">
      <img src="https://search.creativecommons.org/static/img/cc-by_icon.svg" alt="CC by icon">
      <img src="https://search.creativecommons.org/static/img/cc-nc_icon.svg" alt="CC NC icon">
      
        <img src="https://search.creativecommons.org/static/img/cc-nd_icon.svg" alt="CC ND icon">
        
      
    </a>
  </p>



  <p class="powered-by">
    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
